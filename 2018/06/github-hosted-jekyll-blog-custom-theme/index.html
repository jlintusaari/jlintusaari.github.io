<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Making a GitHub hosted Jekyll blog with a custom theme</title>
  <meta name="description" content="I have been thinking of making a blog for a while. I wanted to find a blogging platform that was simple, customizable, static content based so that I could host it in GitHub pages, and supported Markdown so that I could easily publish code projects from Jupyter notebooks and R’s knitr. After a bit of searching I decided to go forward with Jekyll which is a Ruby based blogging platform that seems to have the above features.">
  
    
    <meta name="keywords" content="jekyll, Docker, GitHub">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="/2018/06/github-hosted-jekyll-blog-custom-theme/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Jarno&#39;s blog" href="/feed.xml">

  

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="jlintusaari">
  <meta name="twitter:title" content="Making a GitHub hosted Jekyll blog with a custom theme">
  <meta name="twitter:description" content="I have been thinking of making a blog for a while. I wanted to find a blogging platform that was simple, customizable, static content based so that I could host it in GitHub pages, and supported Ma...">
  
    <meta name="twitter:creator" content="jlintusaari">
  
  

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet">

  
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-121379633-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Jarno&#39;s blog</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/archives/">Archives</a>
      
        
        <a class="page-link" href="/about/">About</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Making a GitHub hosted Jekyll blog with a custom theme</h1>
    
    <p class="post-meta"><time datetime="2018-06-13T00:00:00-05:00" itemprop="datePublished">Jun 13, 2018</time> •
  
    
    
      
        <a href="/categories/jekyll/">Jekyll</a>,
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  
    
    
      
    
      
        <a href="/categories/github/">GitHub</a>,
      
    
      
    
      
    
      
    
      
    
      
    
  
    
    
      
    
      
    
      
        <a href="/categories/docker/">Docker</a>,
      
    
      
    
      
    
      
    
      
    
  
    
    
      
    
      
    
      
    
      
        <a href="/categories/blog/">blog</a>
      
    
      
    
      
    
      
    
  



</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I have been thinking of making a blog for a while.
I wanted to find a blogging platform that was simple, customizable, static content based so that I 
could host it in <a href="https://pages.github.com/">GitHub pages</a>, and supported Markdown so that I could easily publish 
code projects from Jupyter notebooks and R’s <a href="https://yihui.name/knitr/">knitr</a>.
After a bit of searching I decided to go forward with <a href="https://jekyllrb.com/">Jekyll</a> which is a Ruby based blogging 
platform that seems to have the above features.</p>

<h3 id="why-github-pages">Why GitHub pages</h3>

<p>GitHub provides hosting for static content sites via it’s <a href="https://pages.github.com/">GitHub pages</a>.
This is really convenient as one does not have to bother setting up a production server and the 
pages are automatically served from a git repository.
All you need to do is to push your content into a special repository (more of this below).</p>

<p>What is neat with <a href="https://pages.github.com/">GitHub pages</a> for <a href="https://jekyllrb.com/">Jekyll</a> is that Jekyll based pages can 
automatically built by GitHub, meaning that the static content is automatically compiled from 
the Jekyll source files, such as those Markdown files. 
Given that GitHub was originally <a href="http://shayfrendt.com/posts/upgrading-github-to-rails-3-with-zero-downtime/">built with Ruby On Rails</a>, the famous Ruby based 
web-application framework, it’s no wonder that GitHub gave the Ruby based <a href="https://jekyllrb.com/">Jekyll</a> a special support.
However, I ended up not using that neatness due to a missing gem (Ruby library) in the GitHub 
environment that was required by my custom theme.</p>

<h2 id="setting-up-a-developer-environment">Setting up a developer environment</h2>

<p>It’s essential to be able to test your site in your local computer.
Jekyll is based on Ruby which needs to be installed if you want to compile your blog from the source
files. 
Installing Ruby and learning it’s ecosystem will take some time, so unless you have that ready it is
probably the easiest to use <a href="https://docs.docker.com/install/">Docker</a> instead.</p>

<p>Jekyll has an official <a href="https://hub.docker.com/r/jekyll/jekyll/">docker image</a> that has all the needed components installed.
The following instructions will be based on Docker and assumes you have a working Docker installed
to your computer and you are using linux. If you are using Windows 10, you can either use the bash 
shell within Windows or just modify the commands below.</p>

<p>The philosophy behind the Docker commands below is that if we had Ruby environment installed locally, 
we could just run commands like <code class="highlighter-rouge">jekyll new</code> or <code class="highlighter-rouge">bundle install</code> to build a new blog or install 
Ruby libraries (called <em>gems</em>). 
Now instead we will run such commands with <code class="highlighter-rouge">docker run</code> through the container that has the 
Ruby environment installed.</p>

<h3 id="creating-the-initial-jekyll-source-files-with-docker">Creating the initial jekyll source files with Docker</h3>

<p>We will use the official <a href="https://hub.docker.com/r/jekyll/jekyll/">Jekyll Docker image</a> to build the initial source files for
the blog. 
You can find the files created in this section from <a href="https://github.com/jlintusaari/local-jekyll-docker">this repository</a> that I created.
To start, first create a folder for the blog, e.g. <code class="highlighter-rouge">mkdir blog</code>.</p>

<p>The initial Jekyll blog files can now be created into the <code class="highlighter-rouge">blog</code> folder with 
<a href="https://hub.docker.com/r/jekyll/jekyll/">Jekyll Docker image</a> (I used <code class="highlighter-rouge">jekyll/jekyll:3.8</code>) by running:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm --volume="$PWD/blog:/srv/jekyll" -it jekyll/jekyll:3.8 \
  jekyll new . --skip-bundle
</code></pre></div></div>

<p>The command mounted your <code class="highlighter-rouge">blog</code> directory to <code class="highlighter-rouge">/srv/jekyll</code> in the container and then created the 
blog files with <code class="highlighter-rouge">jekyll new</code>. 
The source files should now appear in your <code class="highlighter-rouge">blog</code> folder.
Additional info about the command used above can be found from <a href="https://github.com/jlintusaari/local-jekyll-docker">here</a>.</p>

<p>It may be beneficial to open an interactive shell to the container to test the different commands, 
for instance to open an interactive bash shell type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm --volume="$PWD/blog:/srv/jekyll" -it jekyll/jekyll:3.8 \
  bash
</code></pre></div></div>

<p>Now you can check the options for <code class="highlighter-rouge">jekyll new</code> with <code class="highlighter-rouge">jekyll new --help</code> (note that in the first time
it will install bunch of gems).</p>

<p>Some files that we will be needing are <code class="highlighter-rouge">Gemfile</code> which lists the gems (Ruby libraries) that your project will
use and <code class="highlighter-rouge">_config.yml</code> which is the Jekyll site configuration file.</p>

<h3 id="running-the-server-locally-with-docker">Running the server locally with Docker</h3>

<p>The fastest way to run the server is to change directory to the <code class="highlighter-rouge">blog</code> folder 
(that contains the source files) and type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm --volume="$PWD:/srv/jekyll" -p 4000:4000 -it jekyll/jekyll:3.8 \
  bash -c "bundle install &amp;&amp; bundle exec jekyll serve -H 0.0.0.0"
</code></pre></div></div>

<p>You should see information about the server staring. If not, make sure you are in the same folder
where you have the source files created above (the <code class="highlighter-rouge">blog</code> folder in this example).
Now you should have your blog running in <code class="highlighter-rouge">localhost:4000</code> so go ahead and type that to your
browser’s address bar to test. 
Details of the arguments to <code class="highlighter-rouge">docker run</code> can be found from <a href="https://github.com/jlintusaari/local-jekyll-docker">here</a>.</p>

<p>While the server is running you can edit the different files to see their effect. 
For instance you can modify the <code class="highlighter-rouge">about.md</code> file and see how the About page is changed after you
save the changes.
Exceptions are the files <code class="highlighter-rouge">_config.yml</code> or <code class="highlighter-rouge">Gemfile</code> that require restarting the server.</p>

<h3 id="speeding-up-the-starting-of-the-server">Speeding up the starting of the server</h3>

<p>The above process always reinstalls the needed gems to the container based on the official image. 
A more efficient way is to first create an image that has the needed gems and then use that image.
This will actually speed up all the other commands too. 
Assuming we are in the <code class="highlighter-rouge">blog</code> folder, type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --name blog_server --volume="$PWD:/srv/jekyll" -it jekyll/jekyll:3.8 \
  bundle install
</code></pre></div></div>

<p>Notice that we removed the <code class="highlighter-rouge">--rm</code> argument which would remove the container after execution. Instead 
we added <code class="highlighter-rouge">--name</code> to give the container a name <code class="highlighter-rouge">blog_server</code>. Now typing <code class="highlighter-rouge">docker ps -a</code> 
should show you a container with that name. It has all the gems installed
and the final step is to make an image of it with <code class="highlighter-rouge">docker commit</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker commit blog_server blog_server
</code></pre></div></div>

<p>Now we have an image called <code class="highlighter-rouge">blog_server</code> that is based on the official image and has all the needed 
gems installed. 
You can see this image listed by typing <code class="highlighter-rouge">docker images</code>. 
The server can now be ran using our new image with</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm --volume="$PWD:/srv/jekyll" -p 4000:4000 -it blog_server \
  bundle exec jekyll serve -H 0.0.0.0
</code></pre></div></div>

<p>You will notice that server starts in an instant. 
As long as you keep the image in your computer you can use it to serve the blog. 
If you at some point update your bundle (Gemfile) you can recreate the image with the steps above.</p>

<h2 id="customizing-the-blog">Customizing the blog</h2>

<p>The first thing in customizing the blog is to choose a theme.
If you are planning to host in GitHub with automatic compilation, you can choose the theme from 
multiple <a href="https://pages.github.com/themes/">options</a> or even use custom themes via the 
<a href="https://github.com/benbalter/jekyll-remote-theme"><code class="highlighter-rouge">jekyll-remote-theme</code></a> gem.
To test locally you need to replicate the GitHub Ruby environment.
Luckily GitHub makes this really easy, you just need to have</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem "github-pages", group: :jekyll_plugins
</code></pre></div></div>
<p>in your <code class="highlighter-rouge">Gemfile</code> and remove the <code class="highlighter-rouge">gem "jekyll"</code> line. 
This will install all the gems in your local environment that are provided at GitHub.</p>

<p>I had already chosen a <a href="https://github.com/yous/whiteglass">theme</a> that was not in the list of GitHub supported themes and 
unfortunately depended on a gem called <code class="highlighter-rouge">jekyll-archives</code> that was not available in the GitHub Ruby 
environment.
This caused the post tags to silently disappear from the posts in compilation (luckily I noticed it).
I figured the safest and easiest way forward at this stage would be to just build the pages locally, 
and push the compiled static pages to GitHub.
That way I wouldn’t have to worry about what’s available in the GitHub Ruby environment and what’s 
not.
Of course this means more manual work for me, but not that much.</p>

<p>I followed the <a href="https://github.com/yous/whiteglass#quick-start">quick start instructions</a> of the theme to edit
my source files.</p>

<h2 id="hosting-in-github">Hosting in GitHub</h2>

<p>The last step is to have GitHub host the compiled pages. GitHub has made this really 
<a href="https://pages.github.com/">simple</a>. 
You only need to create a git repository with a special name <code class="highlighter-rouge">&lt;username&gt;.github.io</code> and all the 
static content you push to it’s <code class="highlighter-rouge">master</code> branch will be available at 
<code class="highlighter-rouge">https://&lt;username&gt;.github.com</code>.</p>

<p>A small nuisance in my case is that I need to manually compile the pages and then push the compiled 
pages to GitHub. 
To compile the pages with Docker one can either:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --volume="$PWD:/srv/jekyll" -it jekyll/jekyll:3.8 \
  jekyll build
</code></pre></div></div>

<p>or use the <code class="highlighter-rouge">blog_server</code> image created above</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --volume="$PWD:/srv/jekyll" -it blog_server \
  jekyll build
</code></pre></div></div>

<p>The compiled pages are now found from the <code class="highlighter-rouge">_site</code> folder. 
The contents of this folder need to be committed to the master branch of the <code class="highlighter-rouge">&lt;username&gt;.github.io</code> 
repository and pushed.</p>

<p>To automate this I slightly modified the build command to place the files directly to the 
local clone of the <code class="highlighter-rouge">&lt;username&gt;.github.io</code> repository:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -v="$PWD:/srv/jekyll" -v="path/to/github_repo:/srv/site" -it blog_server \
  jekyll build -d /srv/site
</code></pre></div></div>

<p>Now the compiled static files are automatically placed to the local <code class="highlighter-rouge">path/to/github_repo</code> 
folder. After committing and pushing you should see your blog appearing at 
<code class="highlighter-rouge">https://&lt;username&gt;.github.com</code>.</p>


  </div>

  

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
